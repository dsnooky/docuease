<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Cover Letter | DocuEase</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
body{font-family:Poppins;margin:0;background:#f4f6f8;color:#333;}
header{background:#0f2027;color:#00e5ff;padding:20px;text-align:center;}
.container{display:grid;grid-template-columns:1fr 1fr;gap:20px;padding:20px;}
.form,.preview{background:#fff;padding:20px;border-radius:12px;}
input,textarea{width:100%;padding:10px;margin-bottom:10px;border-radius:10px;border:1px solid #ccc;}
.preview{position:relative;}
.lock{position:absolute;inset:0;backdrop-filter:blur(4px);background:rgba(255,255,255,.8);display:flex;align-items:center;justify-content:center;}
button{padding:10px 20px;border:none;background:#00e5ff;font-weight:600;cursor:pointer;border-radius:20px;}
.download-btn{margin-top:20px;display:none;}
footer{background:#0f2027;color:#fff;padding:25px 20px;text-align:center;font-size:14px;border-top:2px solid #00e5ff;}
footer a{color:#00e5ff;text-decoration:none;margin:0 8px;transition:0.3s;}
footer a:hover{color:#fff;text-decoration:underline;}
@media(max-width:900px){.container{grid-template-columns:1fr}}
</style>
</head>
<body>

<header><h2>AI Cover Letter Generator</h2></header>

<div class="container">

<div class="form">
<input id="name" placeholder="Full Name">
<input id="position" placeholder="Position / Job Title">
<input id="company" placeholder="Company Name">
<textarea id="reason" placeholder="Why you are a good fit?"></textarea>
<button onclick="generateLetter()">Generate AI Cover Letter</button>
</div>

<div class="preview">
<div id="previewText">AI-generated cover letter will appear here.</div>
<div class="lock" id="lock">
<button onclick="unlock()">Unlock & Download (₱49)</button>
</div>
<button id="downloadBtn" class="download-btn" onclick="downloadPDF()">Download PDF</button>
</div>

</div>

<footer>
<p>
<a href="terms.html">Terms & Conditions</a> |
<a href="privacy.html">Privacy Policy</a> |
<a href="disclaimer.html">Disclaimer</a>
</p>
<p>© 2025 DocuEase. All rights reserved.</p>
</footer>

<script>
async function generateLetter(){
  const name=document.getElementById('name').value;
  const position=document.getElementById('position').value;
  const company=document.getElementById('company').value;
  const reason=document.getElementById('reason').value;

  if(!name||!position||!company||!reason){
    alert("Please fill all fields.");
    return;
  }

  document.getElementById('previewText').innerText="Generating AI cover letter...";

  // Call your backend API
  const response = await fetch("https://your-backend.com/api/ai-coverletter",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({name,position,company,reason})
  });

  const data = await response.json();
  document.getElementById('previewText').innerText = data.letter;
}

function unlock(){
  alert("Payment successful (demo)");
  document.getElementById('lock').style.display="none";
  document.getElementById('downloadBtn').style.display="block";
}

function downloadPDF(){
  const {jsPDF}=window.jspdf;
  const doc=new jsPDF();
  doc.setFont("Times");
  doc.setFontSize(12);
  doc.text(previewText.innerText,10,20);
  doc.save("AI-CoverLetter.pdf");
}

if(localStorage.getItem("subscribed")==="yes") unlock();
</script>

</body>
</html>
